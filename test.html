<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smash Routes - Test Page</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .success { background: #d4edda; border-color: #c3e6cb; }
        .error { background: #f8d7da; border-color: #f5c6cb; }
        button { padding: 8px 16px; margin: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>Smash Routes - Module Test</h1>
    
    <div class="test-section">
        <h3>Test 1: Basic Page Load</h3>
        <p>If you can see this page, the basic HTML structure is working.</p>
        <div id="test1" class="success">✓ Page loads successfully</div>
    </div>

    <div class="test-section">
        <h3>Test 2: External Dependencies</h3>
        <div id="test2-xlsx">Checking XLSX library...</div>
        <div id="test2-leaflet">Checking Leaflet library...</div>
        <div id="test2-firebase">Checking Firebase library...</div>
    </div>

    <div class="test-section">
        <h3>Test 3: Module Functions</h3>
        <div id="test3-functions">Checking function availability...</div>
    </div>

    <div class="test-section">
        <h3>Quick Test Links</h3>
        <button onclick="window.open('index.html', '_blank')">Open Main App</button>
        <button onclick="window.open('legacy_index.html', '_blank')">Open Legacy Version</button>
    </div>

    <script>
        // Test external libraries
        setTimeout(() => {
            // Test XLSX
            const xlsxTest = document.getElementById('test2-xlsx');
            if (typeof XLSX !== 'undefined') {
                xlsxTest.className = 'success';
                xlsxTest.textContent = '✓ XLSX library loaded';
            } else {
                xlsxTest.className = 'error';
                xlsxTest.textContent = '✗ XLSX library not loaded';
            }

            // Test Leaflet
            const leafletTest = document.getElementById('test2-leaflet');
            if (typeof L !== 'undefined') {
                leafletTest.className = 'success';
                leafletTest.textContent = '✓ Leaflet library loaded';
            } else {
                leafletTest.className = 'error';
                leafletTest.textContent = '✗ Leaflet library not loaded';
            }

            // Test Firebase
            const firebaseTest = document.getElementById('test2-firebase');
            if (typeof firebase !== 'undefined') {
                firebaseTest.className = 'success';
                firebaseTest.textContent = '✓ Firebase library loaded';
            } else {
                firebaseTest.className = 'error';
                firebaseTest.textContent = '✗ Firebase library not loaded';
            }

            // Test functions
            const functionsTest = document.getElementById('test3-functions');
            const functions = [
                'initializeTabSwitching',
                'initializeAddressManagement', 
                'initializeExcelHandling',
                'initializeRouteForm',
                'initializeMapSystem',
                'initializeFirebaseAuth'
            ];
            
            const available = functions.filter(fn => typeof window[fn] === 'function').length;
            if (available === functions.length) {
                functionsTest.className = 'success';
                functionsTest.textContent = `✓ All ${available} module functions available`;
            } else {
                functionsTest.className = 'error';
                functionsTest.textContent = `✗ Only ${available}/${functions.length} functions available`;
            }
        }, 1000);
    </script>

    <!-- Load the same dependencies as the main app for testing -->
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    
    <!-- Test our modules -->
    <script src="js/app.js"></script>
    <script src="js/tabs.js"></script>
    <script src="js/address-manager.js"></script>
    <script src="js/route-optimizer.js"></script>
    <script src="js/excel-handler.js"></script>
    <script src="js/map-handler.js"></script>
    <script src="js/firebase-auth.js"></script>
</body>
</html>
